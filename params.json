{"name":"createsend-java","tagline":"A Java library for the Campaign Monitor API.","body":"# createsend-java [![Build Status](https://secure.travis-ci.org/campaignmonitor/createsend-java.png)][travis]\r\n\r\n[travis]: http://travis-ci.org/campaignmonitor/createsend-java\r\n\r\nA Java library which implements the complete functionality of the [Campaign Monitor API](http://www.campaignmonitor.com/api/).\r\n\r\n## Authenticating\r\n\r\nThe Campaign Monitor API supports authentication using either OAuth or an API key.\r\n\r\n### Using OAuth\r\n\r\nThis library helps you authenticate using OAuth, as described in the Campaign Monitor API [documentation](http://www.campaignmonitor.com/api/getting-started/#authenticating_with_oauth). You may also wish to reference this Java [example application](https://gist.github.com/jdennes/4997342). The authentication process is described below.\r\n\r\nThe first thing your application should do is redirect your user to the Campaign Monitor authorization URL where they will have the opportunity to approve your application to access their Campaign Monitor account. You can get this authorization URL by using `com.createsend.General.getAuthorizeUrl()`, like so:\r\n\r\n```java\r\nString authorizeUrl = com.createsend.General.getAuthorizeUrl(\r\n    32132,                 // The Client ID for your application\r\n    \"http://example.com/\", // Redirect URI for your application\r\n    \"ViewReports\",         // The permission level your application requires\r\n    \"some state data\"      // Optional state data to be included\r\n);\r\n// Redirect your users to authorizeUrl.\r\n```\r\n\r\nIf your user approves your application, they will then be redirected to the redirect URI you specified, which will include a `code` parameter, and optionally a `state` parameter in the query string. Your application should implement a handler which can exchange the code passed to it for an access token, using `com.createsend.General.exchangeToken()` like so:\r\n\r\n```java\r\ncom.createsend.models.OAuthTokenDetails tokenDetails = com.createsend.General.exchangeToken(\r\n    32132,                 // The Client ID for your application\r\n    \"982u39823r928398\",    // The Client Secret for your application\r\n    \"http://example.com/\", // Redirect URI for your application\r\n    \"8dw9uq98wu98d\"        // The unique code for your user found in the query string\r\n);\r\n// Save your access token, 'expires in' value, and refresh token (in tokenDetails).\r\n```\r\n\r\nAt this point you have an access token and refresh token for your user which you should store somewhere convenient so that your application can look up these values when your user wants to make future Campaign Monitor API calls.\r\n\r\nOnce you have an access token and refresh token for your user, you can authenticate and make further API calls like so:\r\n\r\n```java\r\nimport com.createsend.General;\r\nimport com.createsend.models.clients.ClientBasics;\r\nimport com.createsend.util.OAuthAuthenticationDetails;\r\nimport com.createsend.util.exceptions.CreateSendException;\r\n\r\npublic class Tester {\r\n    public static void main(String[] args) throws CreateSendException {\r\n        OAuthAuthenticationDetails auth = new OAuthAuthenticationDetails(\r\n            \"your access token\", \"your refresh token\");\r\n        General general = new General(auth);\r\n        ClientBasics[] clients = general.getClients();\r\n    }\r\n}\r\n```\r\n\r\nAll OAuth tokens have an expiry time, and can be renewed with a corresponding refresh token. If your access token expires when attempting to make an API call, a `com.createsend.util.exceptions.ExpiredOAuthTokenException` will be thrown, so your code should handle this. Here's an example of how you could do this:\r\n\r\n```java\r\nimport com.createsend.General;\r\nimport com.createsend.models.clients.ClientBasics;\r\nimport com.createsend.util.OAuthAuthenticationDetails;\r\nimport com.createsend.util.exceptions.CreateSendException;\r\nimport com.createsend.util.exceptions.ExpiredOAuthTokenException;\r\n\r\npublic class Tester {\r\n    public static void main(String[] args) throws CreateSendException {\r\n        OAuthAuthenticationDetails auth = new OAuthAuthenticationDetails(\r\n            \"your access token\", \"your refresh token\");\r\n\r\n        General general = new General(auth);\r\n        ClientBasics[] clients;\r\n\r\n        try {\r\n            clients = general.getClients();\r\n        } catch (ExpiredOAuthTokenException ex) {\r\n            OAuthTokenDetails newTokenDetails = general.refreshToken();\r\n            // Save your updated access token, 'expires in' value, and refresh token\r\n            clients = general.getClients(); // Make the call again\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Using an API key\r\n\r\n```java\r\nimport com.createsend.General;\r\nimport com.createsend.models.clients.ClientBasics;\r\nimport com.createsend.util.ApiKeyAuthenticationDetails;\r\nimport com.createsend.util.exceptions.CreateSendException;\r\n\r\npublic class Tester {\r\n    public static void main(String[] args) throws CreateSendException {\r\n        ApiKeyAuthenticationDetails auth = new ApiKeyAuthenticationDetails(\r\n            \"your api key\");\r\n        General general = new General(auth);\r\n        ClientBasics[] clients = general.getClients();\r\n    }\r\n}\r\n```\r\n\r\n## Basic usage\r\n\r\nThis example of listing all your clients and their campaigns demonstrates basic usage of the library and the data returned from the API:\r\n\r\n```java\r\nimport com.createsend.Clients;\r\nimport com.createsend.General;\r\nimport com.createsend.models.campaigns.SentCampaign;\r\nimport com.createsend.models.clients.ClientBasics;\r\nimport com.createsend.util.OAuthAuthenticationDetails;\r\nimport com.createsend.util.exceptions.CreateSendException;\r\n\r\npublic class Tester {\r\n    public static void main(String[] args) throws CreateSendException {\r\n        OAuthAuthenticationDetails auth = new OAuthAuthenticationDetails(\r\n            \"your access token\", \"your refresh token\");\r\n        General general = new General(auth);\r\n        General general = new General(auth);\r\n        ClientBasics[] clients = general.getClients();\r\n\r\n        for (ClientBasics cl : clients) {\r\n            System.out.printf(\"Client: %s\\n\", cl.Name);\r\n            Clients cls = new Clients(auth, cl.ClientID);\r\n            System.out.printf(\"- Campaigns:\\n\");\r\n            for (SentCampaign cm : cls.sentCampaigns()) {\r\n                System.out.printf(\"  - %s\\n\", cm.Subject);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSee the [samples](https://github.com/campaignmonitor/createsend-java/blob/master/samples/com/createsend/samples/SampleRunner.java) directory for more example code.\r\n\r\n## Documentation\r\nFull javadoc for this library is available [here](http://campaignmonitor.github.com/createsend-java/doc/).\r\n\r\n## Building\r\n\r\n### Use Gradle:\r\nRun the following command from the root directory of the repository:\r\n\r\n```\r\ngradle -i\r\n```\r\n\r\n### Developing with Eclipse:\r\nGradle can be used to create the `.classpath` and `.project` files to import the project into Eclipse. Run the following command from the root directory of the repository:\r\n\r\n```\r\ngradle eclipse\r\n```\r\n\r\n### Developing with IDEA\r\nGradle can be used to create an IDEA project and module files. Run the following command from the root directory of the repository:\r\n\r\n```\r\ngradle idea\r\n```\r\n\r\n## Contributing\r\n\r\nPlease check the [guidelines for contributing](https://github.com/campaignmonitor/createsend-java/blob/master/CONTRIBUTING.md) to this repository.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}